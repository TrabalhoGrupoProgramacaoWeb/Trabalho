<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Management System 2025</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
     <div class="header_principal">

            <div class="header_cima"> <!-- coisas aleatorioas -->
                <h1>(+351) 123 456 789 ‚óè Chamada para rede Fixa Nacional | email@gmail.com</h1>
            </div>

            <div class="header_baixo_logo"><!-- logo -->
                <img src="IMG/LOGO Branco.png" alt="Hotel Logo" class="logo">
            </div>

            <div class="header_baixo_menu"><!-- menu -->
                <div class="nav-tabs">
                    <button class="nav-btn active" onclick="switchTab('quartos')">Quartos</button>
                    <button class="nav-btn" onclick="switchTab('reservas')">Reservas</button>
                    <button class="nav-btn" onclick="switchTab('dashboard')">Dashboard</button>
                </div>
            </div>
        </div>

    
    

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <button class="close-btn" onclick="cancelPayment()">‚úï</button>
            <div class="modal-header">
                <h2>üí≥ Pagamento Seguro</h2>
                <p>Confirme seus dados de pagamento</p>
            </div>
            <div class="modal-body">
                <div class="summary-box">
                    <h3>Resumo da Reserva</h3>
                    <div id="reservaSummary"></div>
                </div>

                <div class="security-notice">
                    üîí Pagamento 100% seguro e criptografado
                </div>

                <div class="form-group">
                    <label>N√∫mero do Cart√£o</label>
                    <input type="text" id="numeroCartao" placeholder="1234 5678 9012 3456" maxlength="19" 
                           oninput="formatarCartao(this)">
                </div>

                <div class="form-group">
                    <label>Nome no Cart√£o</label>
                    <input type="text" id="nomeCartao" placeholder="NOME COMO EST√Å NO CART√ÉO"
                           oninput="this.value = this.value.toUpperCase()">
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                    <div class="form-group">
                        <label>Validade</label>
                        <input type="text" id="validade" placeholder="MM/AA" maxlength="5"
                               oninput="formatarValidade(this)">
                    </div>
                    <div class="form-group">
                        <label>CVV</label>
                        <input type="text" id="cvv" placeholder="123" maxlength="3"
                               oninput="this.value = this.value.replace(/\D/g, '')">
                    </div>
                </div>

                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="cancelPayment()">Cancelar</button>
                    <button class="btn btn-success" onclick="processarPagamento()">üîí Pagar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Content -->
    <div class="container">
        <!-- Quartos Tab -->
        <div class="tab-content active" id="tab-quartos">
            <h1>Lista de Quartos</h1>
            <div class="grid grid-cols-3" id="quartosGrid"></div>
        </div>

        <!-- Reservas Tab -->
        <div class="tab-content" id="tab-reservas">
            <div class="grid grid-cols-2">
                <!-- Nova Reserva -->
                <div class="card">
                    <h2>‚ûï Nova Reserva</h2>
                    <form id="reservaForm">
                        <div class="form-group">
                            <label>Nome Completo</label>
                            <input type="text" id="cliente" placeholder="Ex: Jo√£o Silva" required>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="email" placeholder="joao@email.com" required>
                        </div>
                        <div class="form-group">
                            <label>Telefone</label>
                            <input type="tel" id="telefone" placeholder="+351 912 345 678" required>
                        </div>
                        <div class="form-group">
                            <label>Quarto</label>
                            <select id="quartoId" required>
                                <option value="">Selecione um quarto</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Check-in</label>
                            <input type="date" id="checkIn" min="2025-01-01" max="2025-12-31" required>
                        </div>
                        <div class="form-group">
                            <label>Check-out</label>
                            <input type="date" id="checkOut" min="2025-01-01" max="2025-12-31" required>
                        </div>
                        <button type="button" class="btn btn-primary" onclick="prepararReserva()">
                            üí≥ Continuar para Pagamento
                        </button>
                    </form>
                </div>

                <!-- Lista de Reservas -->
                <div class="card">
                    <h2>‚úÖ Reservas Confirmadas</h2>
                    <div class="reservations-list" id="reservasLista"></div>
                </div>
            </div>
        </div>

        <!-- Dashboard Tab -->
        <div class="tab-content" id="tab-dashboard">
            <h1>Dashboard de Gest√£o</h1>
            
            <div class="stats-grid" id="statsGrid"></div>

            <div class="chart-container">
                <h3 class="chart-title">üìà Fatura√ß√£o Mensal 2025</h3>
                <div class="chart" id="faturacaoChart"></div>
            </div>
        </div>
    </div>

    <script>
        // Dados
        const quartos = [
            { id: 1, numero: '101', tipo: 'Single', preco: 50, imagem: 'üõèÔ∏è' },
            { id: 2, numero: '102', tipo: 'Duplo', preco: 80, imagem: 'üõèÔ∏èüõèÔ∏è' },
            { id: 3, numero: '103', tipo: 'Suite', preco: 150, imagem: 'üëë' },
            { id: 4, numero: '201', tipo: 'Single', preco: 50, imagem: 'üõèÔ∏è' },
            { id: 5, numero: '202', tipo: 'Duplo', preco: 80, imagem: 'üõèÔ∏èüõèÔ∏è' },
            { id: 6, numero: '203', tipo: 'Suite', preco: 150, imagem: 'üëë' },
        ];

        let reservas = [];
        let reservaTemp = null;
        const meses = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'];

        // Fun√ß√µes
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`tab-${tabName}`).classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'quartos') renderQuartos();
            else if (tabName === 'reservas') renderReservas();
            else if (tabName === 'dashboard') renderDashboard();
        }

        function calcularDias(checkIn, checkOut) {
            const date1 = new Date(checkIn);
            const date2 = new Date(checkOut);
            const diff = Math.abs(date2 - date1);
            return Math.ceil(diff / (1000 * 60 * 60 * 24));
        }

        function formatarCartao(input) {
            let valor = input.value.replace(/\D/g, '');
            let grupos = [];
            for (let i = 0; i < valor.length; i += 4) {
                grupos.push(valor.substring(i, i + 4));
            }
            input.value = grupos.join(' ');
        }

        function formatarValidade(input) {
            let valor = input.value.replace(/\D/g, '');
            if (valor.length >= 2) {
                valor = valor.slice(0, 2) + '/' + valor.slice(2, 4);
            }
            input.value = valor;
        }

        function validarCartao() {
            const numeroCartao = document.getElementById('numeroCartao').value;
            const nomeCartao = document.getElementById('nomeCartao').value;
            const validade = document.getElementById('validade').value;
            const cvv = document.getElementById('cvv').value;
            const numeroLimpo = numeroCartao.replace(/\s/g, '');
            
            if (numeroLimpo.length !== 16) {
                alert('N√∫mero do cart√£o deve ter 16 d√≠gitos');
                return false;
            }
            if (!nomeCartao || nomeCartao.length < 3) {
                alert('Nome no cart√£o inv√°lido');
                return false;
            }
            if (!/^(0[1-9]|1[0-2])\/\d{2}$/.test(validade)) {
                alert('Validade inv√°lida. Use formato MM/AA');
                return false;
            }
            const [mes, ano] = validade.split('/');
            const anoCompleto = 2000 + parseInt(ano);
            const dataValidade = new Date(anoCompleto, parseInt(mes) - 1);
            if (dataValidade < new Date()) {
                alert('Cart√£o expirado');
                return false;
            }
            if (cvv.length !== 3) {
                alert('CVV deve ter 3 d√≠gitos');
                return false;
            }
            return true;
        }

        function prepararReserva() {
            const cliente = document.getElementById('cliente').value;
            const email = document.getElementById('email').value;
            const telefone = document.getElementById('telefone').value;
            const quartoId = document.getElementById('quartoId').value;
            const checkIn = document.getElementById('checkIn').value;
            const checkOut = document.getElementById('checkOut').value;

            if (!cliente || !email || !telefone || !quartoId || !checkIn || !checkOut) {
                alert('Preencha todos os campos!');
                return;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Email inv√°lido');
                return;
            }

            const quarto = quartos.find(q => q.id === parseInt(quartoId));
            const dias = calcularDias(checkIn, checkOut);
            
            if (dias <= 0) {
                alert('Data de check-out deve ser posterior ao check-in');
                return;
            }

            const total = quarto.preco * dias;
            reservaTemp = { quartoId: parseInt(quartoId), cliente, email, telefone, checkIn, checkOut, dias, total, quarto };
            mostrarModal();
            atualizarResumo();
        }

        function atualizarResumo() {
            const resumoHtml = `
                <div class="summary-item"><span>Cliente:</span><span style="font-weight: bold;">${reservaTemp.cliente}</span></div>
                <div class="summary-item"><span>Quarto:</span><span style="font-weight: bold;">${reservaTemp.quarto.numero} - ${reservaTemp.quarto.tipo}</span></div>
                <div class="summary-item"><span>Check-in:</span><span style="font-weight: bold;">${new Date(reservaTemp.checkIn).toLocaleDateString('pt-PT')}</span></div>
                <div class="summary-item"><span>Check-out:</span><span style="font-weight: bold;">${new Date(reservaTemp.checkOut).toLocaleDateString('pt-PT')}</span></div>
                <div class="summary-item"><span>Noites:</span><span style="font-weight: bold;">${reservaTemp.dias}</span></div>
                <div class="summary-total"><span>Total:</span><span class="amount">‚Ç¨${reservaTemp.total}</span></div>
            `;
            document.getElementById('reservaSummary').innerHTML = resumoHtml;
            const btnPagar = document.querySelector('.modal-buttons .btn-success');
            if (btnPagar) btnPagar.innerHTML = `üîí Pagar ‚Ç¨${reservaTemp.total}`;
        }

        function mostrarModal() {
            document.getElementById('paymentModal').classList.add('active');
        }

        function cancelPayment() {
            document.getElementById('paymentModal').classList.remove('active');
            reservaTemp = null;
            document.getElementById('numeroCartao').value = '';
            document.getElementById('nomeCartao').value = '';
            document.getElementById('validade').value = '';
            document.getElementById('cvv').value = '';
        }

        function processarPagamento() {
            if (!validarCartao()) return;

            const novaReserva = {
                id: Date.now(),
                ...reservaTemp,
                pagamento: {
                    ultimosDigitos: document.getElementById('numeroCartao').value.slice(-4),
                    nomeCartao: document.getElementById('nomeCartao').value,
                    dataPagamento: new Date().toISOString()
                }
            };

            reservas.push(novaReserva);
            document.getElementById('reservaForm').reset();
            document.getElementById('numeroCartao').value = '';
            document.getElementById('nomeCartao').value = '';
            document.getElementById('validade').value = '';
            document.getElementById('cvv').value = '';
            cancelPayment();
            alert('‚úÖ Pagamento processado com sucesso!\nReserva confirmada!');
            switchTab('reservas');
        }

        function cancelarReserva(id) {
            const reserva = reservas.find(r => r.id === id);
            if (confirm(`Cancelar reserva de ${reserva.cliente}?\nValor de ‚Ç¨${reserva.total} ser√° reembolsado.`)) {
                reservas = reservas.filter(r => r.id !== id);
                alert('Reserva cancelada! Reembolso ser√° processado em 5-7 dias √∫teis.');
                renderReservas();
            }
        }

        function renderQuartos() {
            const grid = document.getElementById('quartosGrid');
            grid.innerHTML = '';
            quartos.forEach(quarto => {
                const reservado = reservas.some(r => r.quartoId === quarto.id);
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="room-image">${quarto.imagem}</div>
                    <div class="room-title">Quarto ${quarto.numero}</div>
                    <div class="room-type">${quarto.tipo}</div>
                    <div class="room-price">‚Ç¨${quarto.preco}/noite</div>
                    <div class="room-status">
                        <span class="status-badge ${reservado ? 'status-booked' : 'status-available'}">
                            ${reservado ? 'üî¥ Ocupado' : 'üü¢ Dispon√≠vel'}
                        </span>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function renderReservas() {
            const lista = document.getElementById('reservasLista');
            lista.innerHTML = '';

            if (reservas.length === 0) {
                lista.innerHTML = '<div class="empty-state">Nenhuma reserva encontrada</div>';
                return;
            }

            reservas.forEach(reserva => {
                const quarto = quartos.find(q => q.id === reserva.quartoId);
                const div = document.createElement('div');
                div.className = 'reservation-item';
                div.innerHTML = `
                    <div class="reservation-header">
                        <div>
                            <div class="reservation-name">${reserva.cliente}</div>
                            <div class="reservation-email">${reserva.email}</div>
                            <div class="reservation-room">Quarto ${quarto.numero} - ${quarto.tipo}</div>
                        </div>
                        <button class="btn btn-danger" onclick="cancelarReserva(${reserva.id})" title="Cancelar e reembolsar">‚úï</button>
                    </div>
                    <div class="reservation-dates">üìÖ ${new Date(reserva.checkIn).toLocaleDateString('pt-PT')} ‚Üí ${new Date(reserva.checkOut).toLocaleDateString('pt-PT')}</div>
                    <div class="reservation-dates">üõèÔ∏è ${reserva.dias} noite${reserva.dias > 1 ? 's' : ''}</div>
                    <div class="reservation-footer">
                        <div>üí≥ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ${reserva.pagamento.ultimosDigitos}</div>
                        <div class="reservation-price">‚Ç¨${reserva.total}</div>
                    </div>
                `;
                lista.appendChild(div);
            });

            const select = document.getElementById('quartoId');
            select.innerHTML = '<option value="">Selecione um quarto</option>';
            quartos.forEach(q => {
                const option = document.createElement('option');
                option.value = q.id;
                option.textContent = `Quarto ${q.numero} - ${q.tipo} (‚Ç¨${q.preco}/noite)`;
                select.appendChild(option);
            });
        }

        function calcularEstatisticas() {
            const totalFaturado = reservas.reduce((acc, r) => acc + r.total, 0);
            const totalDias = reservas.reduce((acc, r) => acc + r.dias, 0);
            const faturacaoPorMes = {};
            reservas.forEach(r => {
                const mes = new Date(r.checkIn).getMonth();
                faturacaoPorMes[mes] = (faturacaoPorMes[mes] || 0) + r.total;
            });
            return { totalFaturado, totalDias, faturacaoPorMes };
        }

        function renderDashboard() {
            const stats = calcularEstatisticas();
            const statsGrid = document.getElementById('statsGrid');
            statsGrid.innerHTML = `
                <div class="stat-card">
                    <div class="stat-icon indigo">üí∞</div>
                    <div><div class="stat-label">Total Faturado</div><div class="stat-value">‚Ç¨${stats.totalFaturado}</div></div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon green">üìÖ</div>
                    <div><div class="stat-label">Dias Reservados</div><div class="stat-value">${stats.totalDias}</div></div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon purple">üë•</div>
                    <div><div class="stat-label">Total Reservas</div><div class="stat-value">${reservas.length}</div></div>
                </div>
            `;

            const chart = document.getElementById('faturacaoChart');
            chart.innerHTML = '';
            const maxValor = Math.max(...Object.values(stats.faturacaoPorMes), 1);
            
            meses.forEach((mes, index) => {
                const valor = stats.faturacaoPorMes[index] || 0;
                const altura = (valor / maxValor) * 100;
                const barDiv = document.createElement('div');
                barDiv.className = 'bar';
                barDiv.style.height = altura > 0 ? `${altura}%` : '20px';
                barDiv.title = `‚Ç¨${valor}`;
                barDiv.innerHTML = `<div class="bar-label">${mes}</div><div class="bar-value">‚Ç¨${valor}</div>`;
                chart.appendChild(barDiv);
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            renderQuartos();
            renderReservas();
            renderDashboard();
        });
    </script>
</body>
</html>